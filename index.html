<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
  />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#0af2ff" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="/logo.png" />
  <title>SpawnEngine · Mesh HUD v0.3</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="app-body">

  <!-- MESH BACKGROUND (WEBGL) -->
  <div id="mesh-bg">
    <canvas id="mesh-canvas"></canvas>
  </div>
  <div class="mesh-overlay"></div>

  <!-- APP SHELL – ALLT INNE I V3 HUD -->
  <div class="app-shell" id="app-container">
    <div class="hud-card">
      <!-- Top row: avatar + settings -->
      <div class="hud-top-row">
        <button id="btn-account" class="avatar-chip">
          <div class="avatar-circle">S</div>
          <div class="avatar-meta">
            <span class="avatar-handle">@spawniz</span>
            <span class="avatar-sub">Mesh ID · Creator</span>
          </div>
        </button>
        <button id="btn-settings" class="icon-button" aria-label="Settings">
          <div class="icon-gear"></div>
        </button>
      </div>

      <!-- badges / tags -->
      <div class="hud-header-row">
        <div class="hud-tags">
          <span class="pill pill-soft">Base · Mesh ecosystems</span>
          <span class="pill pill-outline">Farcaster ready</span>
        </div>
        <div class="mesh-status-pill">
          <span class="status-dot"></span>
          <span>Mesh v0.3</span>
        </div>
      </div>

      <!-- title block -->
      <div class="hud-title-block">
        <h1 class="hud-title">SpawnEngine · Mesh HUD</h1>
        <p class="hud-subtitle">
          Modular mesh for creator coins, packs, XP streams, quests &amp; support.
        </p>
      </div>

            <!-- platform strip -->
      <div class="platform-strip">
        <span class="platform-pill">
          GAS <span id="gasEstimate" class="platform-pill-value">~0.20 gwei est.</span>
        </span>
        <span class="platform-pill">
          MODE <span class="platform-pill-value">Single mesh</span>
        </span>
        <span class="platform-pill">
          WALLETS <span id="activeWallets" class="platform-pill-value">1</span>
        </span>
      </div>

      <!-- wallet connect row (ny) -->
      <div class="wallet-strip">
        <button id="btn-connect-wallet" class="btn-outline">Connect</button>
        <span class="wallet-address">Not connected</span>
        <span id="walletBalanceEth" class="wallet-balance">0.0000 ETH</span>
      </div>

      <!-- stats grid -->
      <div class="hud-grid hud-grid-4">
        <div class="hud-stat">
          <div class="hud-stat-label">XP Balance</div>
          <div id="xpBalance" class="hud-stat-value">0 XP</div>
        </div>
        <div class="hud-stat">
          <div class="hud-stat-label">SPN Balance</div>
          <div id="spawnBalance" class="hud-stat-value">0 SPN</div>
        </div>
        <div class="hud-stat">
          <div class="hud-stat-label">Sync</div>
          <div class="hud-stat-value">Local mock</div>
        </div>
        <div class="hud-stat">
          <div class="hud-stat-label">Active wallets</div>
          <div id="activeWalletsStat" class="hud-stat-value">1</div>
        </div>
      </div>

      <!-- streak -->
      <div class="streak-row">
        <div class="streak-wheel">
          <div class="streak-circle">
            <div class="streak-day-label">DAY</div>
            <div class="streak-day-value" id="streakDays">1</div>
            <div class="streak-day-label">STREAK</div>
          </div>
        </div>
        <div class="streak-copy">
          <div class="streak-title">Daily ritual</div>
          <p id="streakCopyText" class="streak-sub">
            Keep the streak for <span id="streakRemaining">6</span> more days
            for a full weekly run.
          </p>
          <div class="streak-bar">
            <div id="streakBarFill" class="streak-bar-fill"></div>
          </div>
          <button id="btn-checkin" class="btn-outline">Check-in</button>
        </div>
      </div>

      <!-- TAB PANELS WRAPPED I EN CONTAINER -->
      <div class="tab-content">

        <!-- HOME activity feed -->
        <div id="tab-home" class="tab-panel tab-panel-active">
          <div class="activity-feed">
            <header class="section-header">
              <div>
                <h2>Mesh feed</h2>
                <p class="section-sub">XP, packs &amp; social mesh around your wallet.</p>
              </div>
              <div class="section-tagline">Platform · Live mock</div>
            </header>
            <ul id="homeActivityList" class="activity-list"></ul>
          </div>
        </div>

        <!-- LOOT TAB -->
        <div id="tab-loot" class="tab-panel">
          <header class="section-header">
            <div>
              <h2>Loot &amp; Pull Lab</h2>
              <p class="section-sub">
                Packs, synthesis and mock inventory for SpawnEngine mesh.
              </p>
            </div>
            <div class="section-tagline">Pillar · Packs</div>
          </header>

          <div class="segmented">
            <button
              class="segmented-btn segmented-btn-active"
              data-loot-view="packs"
            >
              Packs
            </button>
            <button class="segmented-btn" data-loot-view="lab">Pull Lab</button>
            <button class="segmented-btn" data-loot-view="inventory">
              Inventory
            </button>
          </div>

          <!-- Packs view -->
          <div id="lootView-packs" class="loot-view loot-view-active">
            <div class="pack-row">
              <div class="pack-card">
                <div class="pack-title">Starter mesh pack</div>
                <div class="pack-sub">
                  Simulated pack open with Fragments, Shards &amp; Relic chances.
                </div>
                <button id="btn-open-pack" class="btn-full-width">
                  Simulate pack open
                </button>
              </div>
            </div>
            <ul id="lootEvents" class="activity-list"></ul>
          </div>

          <!-- Pull Lab -->
          <div id="lootView-lab" class="loot-view">
            <div class="pack-card">
              <div class="pack-title">Pull Lab synthesis</div>
              <div class="pack-sub">
                Burn Fragments and Shards into a Relic (all mock, for UX only).
              </div>

              <div class="hud-grid hud-grid-3">
                <div class="hud-stat">
                  <div class="hud-stat-label">Fragments</div>
                  <div id="invFragments" class="hud-stat-value">0</div>
                </div>
                <div class="hud-stat">
                  <div class="hud-stat-label">Shards</div>
                  <div id="invShards" class="hud-stat-value">0</div>
                </div>
                <div class="hud-stat">
                  <div class="hud-stat-label">Relics</div>
                  <div id="invRelics" class="hud-stat-value">0</div>
                </div>
              </div>

              <button id="btn-simulate-synth" class="btn-full-width">
                Run synthesis (mock)
              </button>
              <p id="labResult" class="lab-result">
                Requires 5 Fragments + 1 Shard (mock requirement).
              </p>
            </div>
          </div>

          <!-- Inventory -->
          <div id="lootView-inventory" class="loot-view">
            <div class="mesh-mini-card">
              Inventory view is mocked — values above reflect your simulated pulls.
            </div>
          </div>
        </div>

        <!-- QUESTS TAB -->
        <div id="tab-quests" class="tab-panel">
          <header class="section-header">
            <div>
              <h2>Quest mesh</h2>
              <p class="section-sub">
                Daily, weekly and support quests feeding your XP streams.
              </p>
            </div>
            <div class="section-tagline">Pillar · Quests</div>
          </header>
          <ul id="questList" class="quest-list"></ul>
        </div>

        <!-- MESH TAB -->
        <div id="tab-mesh" class="tab-panel">
          <header class="section-header">
            <div>
              <h2>Mesh explorer</h2>
              <p class="section-sub">
                Demo of Alpha / New / Gravity modes hooked to your mesh.
              </p>
            </div>
            <div class="section-tagline">Pillar · Mesh</div>
          </header>

          <div class="segmented">
            <button
              class="segmented-btn segmented-btn-active"
              data-mesh-mode="alpha"
            >
              Alpha hunters
            </button>
            <button class="segmented-btn" data-mesh-mode="new">
              New creators
            </button>
            <button class="segmented-btn" data-mesh-mode="gravity">
              Gravity clusters
            </button>
          </div>

          <p id="meshModeCopy" class="hud-subtitle">
            Viewing mesh demo in <strong>Alpha hunters</strong> mode — wallets
            opening high volumes of packs cluster at the edges.
          </p>

          <div class="legend-row">
            <span><span class="legend-dot legend-coin"></span>XP streams</span>
            <span><span class="legend-dot legend-pack"></span>Pack pulls</span>
            <span><span class="legend-dot legend-burn"></span>Burn events</span>
            <span><span class="legend-dot legend-xp"></span>Creator flows</span>
          </div>

          <div class="mesh-mini-card">
            Mesh WebGL view is mocked here. In v1.0 it renders a 3D mesh synced to
            real wallets and packs.
          </div>

          <ul id="meshEvents" class="activity-list"></ul>

          <button id="btn-open-full-mesh" class="btn-full-width">
            Open full Mesh Explorer (platform)
          </button>
        </div>

        <!-- SUPPORT / SUPCAST TAB -->
        <div id="tab-support" class="tab-panel">
          <header class="section-header">
            <div>
              <h2>SupCast · Support mesh</h2>
              <p class="section-sub">
                Ask, claim and solve questions tied to real packs, games &amp;
                creators.
              </p>
            </div>
            <div class="section-tagline">Support · XP · Reputation</div>
          </header>

          <div class="supcast-layout">
            <!-- ASK BLOCK -->
            <div class="supcast-block">
              <h3 class="supcast-title">Ask</h3>
              <p class="hud-subtitle supcast-context-sub">
                Ask about this pack / game / creator. Experts can claim and solve
                for XP.
              </p>

              <div class="supcast-form">
                <div class="supcast-field">
                  <label class="field-label" for="supcastContext">Context</label>
                  <select id="supcastContext" class="field-input">
                    <option>Spawn Core · Boosterbox</option>
                    <option>WarpAI · Onchain Activitys</option>
                    <option>Vibe · Packs</option>
                  </select>
                </div>

                <div class="supcast-field">
                  <label class="field-label" for="supcastTitle">
                    Short title
                  </label>
                  <input
                    id="supcastTitle"
                    class="field-input"
                    type="text"
                    placeholder="Gas failed when opening pack…"
                  />
                </div>

                <div class="supcast-field">
                  <label class="field-label" for="supcastTags">
                    Tags (comma separated)
                  </label>
                  <input
                    id="supcastTags"
                    class="field-input"
                    type="text"
                    placeholder="wallet, gas, claim, pack_open"
                  />
                </div>

                <div class="supcast-field">
                  <label class="field-label" for="supcastDescription">
                    Describe the problem
                  </label>
                  <textarea
                    id="supcastDescription"
                    class="field-input field-textarea"
                    placeholder="Describe what went wrong, what you tried and any tx hashes…"
                  ></textarea>
                </div>

                <div class="supcast-submit">
                  <button id="supcastSubmit" class="btn-full-width">
                    Post question (mock)
                  </button>
                </div>
              </div>
            </div>

            <!-- FEED / EXPERTS BLOCK -->
            <div class="supcast-block supcast-experts">
              <h3 class="supcast-title">Feed · Latest questions</h3>
              <ul id="supcastFeed" class="supcast-feed"></ul>

              <div class="supcast-profile">
                <h4 class="supcast-title">SupCast profile (mock)</h4>
                <div class="supcast-profile-grid">
                  <div class="mesh-mini-card">
                    Cases solved
                    <br /><strong>7</strong>
                  </div>
                  <div class="mesh-mini-card">
                    Support XP
                    <br /><strong>350</strong>
                  </div>
                  <div class="mesh-mini-card">
                    Rating
                    <br /><strong>4.5★</strong>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /SUPPORT TAB -->
      </div>
      <!-- /tab-content -->
    </div>
    <!-- /hud-card -->
  </div>
  <!-- /app-shell -->

  <!-- BOTTOM NAV -->
  <nav class="bottom-nav">
    <button class="nav-btn nav-btn-active" data-tab-target="home">Home</button>
    <button class="nav-btn" data-tab-target="loot">Loot</button>
    <button class="nav-btn" data-tab-target="quests">Quests</button>
    <button class="nav-btn" data-tab-target="mesh">Mesh</button>
    <button class="nav-btn" data-tab-target="support">SupCast</button>
  </nav>

  <!-- ACCOUNT SHEET -->
  <div id="account-sheet" class="sheet-backdrop" aria-hidden="true">
    <div class="sheet">
      <div class="sheet-header">
        <div class="sheet-avatar-row">
          <div class="avatar-circle">S</div>
          <div class="avatar-meta">
            <span class="avatar-handle">@spawniz</span>
            <span class="avatar-sub">Mesh ID · Creator</span>
          </div>
        </div>
      </div>

      <div class="sheet-section-label">Account &amp; rewards</div>
      <button class="sheet-row" data-action="earnings">
        <span>Total mesh earnings</span>
        <span class="chevron">›</span>
      </button>
      <button class="sheet-row" data-action="collectibles">
        <span>Collectibles overview</span>
        <span class="chevron">›</span>
      </button>

      <div class="sheet-section-label">Wallet</div>
      <button class="sheet-row" data-action="swap-wallet">
        <span>Switch wallet</span>
        <span class="chevron">›</span>
      </button>

      <button id="btn-close-account" class="btn-full-width">
        Close
      </button>
    </div>
  </div>

  <!-- SETTINGS SHEET -->
  <div id="settings-sheet" class="sheet-backdrop" aria-hidden="true">
    <div class="settings-panel">
      <div class="settings-header">
        <button id="btn-settings-back" class="icon-back">‹</button>
        <h2>Settings &amp; API</h2>
      </div>

      <div class="settings-scroll">
        <div class="settings-section-label">Profile &amp; account</div>
        <button class="settings-row">
          Connected socials
        </button>
        <button class="settings-row">
          Notifications
        </button>
        <button class="settings-row">
          Feeds &amp; oracle feed
        </button>

        <div class="settings-section-label">Wallet &amp; collectibles</div>
        <button class="settings-row">
          Preferred wallet
        </button>
        <button class="settings-row">
          Verified addresses
        </button>
        <button class="settings-row">
          Docked apps &amp; XP SDK
        </button>
        <button class="settings-row">
          Premium mesh filters
        </button>

        <div class="settings-section-label">Other</div>
        <button class="settings-row">
          Theme
        </button>
        <button class="settings-row">
          Support
        </button>
        <button class="settings-row">
          SpawnEngine Launchpad
        </button>

        <button id="btn-close-settings" class="btn-full-width">
          Close
        </button>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- SCRIPTS -->
  <script src="mesh-bg.js"></script>
  <script src="supcast.js"></script>
  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker
          .register("/service-worker.js")
          .catch((err) => console.error("SW error:", err));
      });
    }
  </script>
</body>
</html>