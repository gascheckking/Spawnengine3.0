<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SpawnEngine • Mesh HUD</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="app-body">
  <!-- WebGL mesh background -->
  <div id="mesh-bg">
    <canvas id="mesh-canvas"></canvas>
  </div>

  <!-- Dark overlay to keep HUD readable -->
  <div class="mesh-overlay"></div>

  <!-- Main app shell -->
  <div class="app-shell">
    <div class="hud-card">
      <!-- Top row: profile + settings -->
      <div class="hud-top-row">
        <button id="btn-account" class="avatar-chip">
          <div class="avatar-circle">S</div>
          <div class="avatar-meta">
            <div class="avatar-handle">@spawniz</div>
            <div class="avatar-sub">Mesh ID · Creator</div>
          </div>
        </button>

        <button id="btn-settings" class="icon-button" aria-label="Settings">
          <span class="icon-gear"></span>
        </button>
      </div>

      <!-- Mesh status + wallet -->
      <div class="hud-header-row">
        <div class="hud-tags">
          <span class="pill pill-soft">Base · Mesh ecosystems</span>
          <span class="pill pill-outline">Farcaster ready</span>
        </div>
        <div class="mesh-status-pill">
          <span class="status-dot"></span>
          Mesh v0.3
        </div>
      </div>

      <div class="hud-title-block">
        <h1 class="hud-title">SpawnEngine · Mesh HUD</h1>
        <p class="hud-subtitle">
          Modular mesh for creator coins, packs, XP streams &amp; onchain quests.
        </p>
      </div>

      <!-- Gas + mode -->
      <div class="hud-grid hud-grid-2">
        <div class="hud-stat">
          <div class="hud-stat-label">GAS</div>
          <div class="hud-stat-value" id="gasEstimate">~0.21 gwei est.</div>
        </div>
        <div class="hud-stat">
          <div class="hud-stat-label">MODE</div>
          <div class="hud-stat-value">Single mesh</div>
        </div>
        <div class="hud-stat">
          <div class="hud-stat-label">SYNC</div>
          <div class="hud-stat-value">Local mock</div>
        </div>
        <div class="hud-stat">
          <div class="hud-stat-label">ACTIVE WALLETS</div>
          <div class="hud-stat-value" id="activeWallets">1</div>
        </div>
      </div>
    </div>

    <!-- Tab content -->
    <main id="tab-content" class="tab-content">
      <!-- Home -->
      <section id="tab-home" class="tab-panel tab-panel-active">
        <div class="hud-card">
          <header class="section-header">
            <div>
              <h2>Mesh snapshot</h2>
              <p class="section-sub">Single player mesh</p>
            </div>
          </header>

          <div class="hud-grid hud-grid-2">
            <div class="metric-card metric-xp">
              <div class="metric-label">XP BALANCE</div>
              <div class="metric-value" id="xpBalance">1575 XP</div>
              <p class="metric-sub">Every onchain action feeds your mesh.</p>
            </div>

            <div class="metric-card">
              <div class="metric-label">SPAWN TOKEN</div>
              <div class="metric-value" id="spawnBalance">497 SPN</div>
              <p class="metric-sub">Mock balance · demo only.</p>
            </div>
          </div>

          <div class="streak-row">
            <div class="streak-wheel">
              <div class="streak-circle">
                <div class="streak-day-label">DAY</div>
                <div class="streak-day-value" id="streakDays">1</div>
                <div class="streak-day-label">STREAK</div>
              </div>
            </div>
            <div class="streak-copy">
              <div class="streak-title">Daily ritual</div>
              <p class="streak-sub">
                Keep the streak for <span id="streakRemaining">6</span> more days
                for a full weekly run.
              </p>
              <button id="btn-checkin" class="btn-outline">Check-in</button>
            </div>
          </div>

          <div class="activity-feed">
            <header class="section-header">
              <div>
                <h2>Today’s signals</h2>
                <p class="section-sub">Mesh events · Last 10 demo actions</p>
              </div>
            </header>
            <ul id="homeActivityList" class="activity-list"></ul>
          </div>
        </div>
      </section>

      <!-- Loot -->
      <section id="tab-loot" class="tab-panel">
        <div class="hud-card">
          <header class="section-header">
            <div>
              <h2>Loot & packs</h2>
              <p class="section-sub">Fragments · Shards · Relics</p>
            </div>
          </header>

          <div class="segmented">
            <button class="segmented-btn segmented-btn-active" data-loot-view="packs">
              Packs
            </button>
            <button class="segmented-btn" data-loot-view="lab">
              Pull Lab
            </button>
            <button class="segmented-btn" data-loot-view="inventory">
              Inventory
            </button>
          </div>

          <div id="lootView-packs" class="loot-view loot-view-active">
            <p class="section-sub">
              Demo packs only. Opening a pack adds XP and mesh activity.
            </p>
            <div class="pack-row">
              <div class="pack-card">
                <div class="pack-title">Starter mesh pack</div>
                <div class="pack-sub">Contains 3–5 Fragments, chance for Shard.</div>
                <button class="btn-primary" id="btn-open-pack">
                  Simulate pack open
                </button>
              </div>
            </div>
            <ul id="lootEvents" class="activity-list"></ul>
          </div>

          <div id="lootView-lab" class="loot-view">
            <p class="section-sub">
              Combine Fragments & Shards into higher-tier Relics. Demo synth only.
            </p>
            <button class="btn-outline" id="btn-simulate-synth">
              Run mock synthesis
            </button>
            <div id="labResult" class="lab-result"></div>
          </div>

          <div id="lootView-inventory" class="loot-view">
            <p class="section-sub">Tier summary · demo balances</p>
            <ul class="tier-list">
              <li><span>Fragments</span><span id="invFragments">12</span></li>
              <li><span>Shards</span><span id="invShards">3</span></li>
              <li><span>Relics</span><span id="invRelics">1</span></li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Quests -->
      <section id="tab-quests" class="tab-panel">
        <div class="hud-card">
          <header class="section-header">
            <div>
              <h2>Quests</h2>
              <p class="section-sub">
                Daily & weekly mesh tasks. All mock for now.
              </p>
            </div>
          </header>

          <ul id="questList" class="quest-list"></ul>
        </div>
      </section>

      <!-- Mesh -->
      <section id="tab-mesh" class="tab-panel">
        <div class="hud-card">
          <header class="section-header">
            <div>
              <h2>Mesh explorer</h2>
              <p class="section-sub">
                Wallet-to-wallet flows rendered as a living mesh. Demo data only.
              </p>
            </div>
            <div class="section-tagline">Wallet flows · Demo</div>
          </header>

          <div class="segmented">
            <button class="segmented-btn segmented-btn-active" data-mesh-mode="alpha">
              Alpha hunters
            </button>
            <button class="segmented-btn" data-mesh-mode="new">
              New creators
            </button>
            <button class="segmented-btn" data-mesh-mode="gravity">
              Gravity clusters
            </button>
          </div>

          <p id="meshModeCopy" class="section-sub">
            Viewing mesh demo in <strong>Gravity clusters</strong> mode — wallets
            with the largest XP streams bend the mesh around them.
          </p>

          <div class="legend-row">
            <span class="legend-dot legend-coin"></span> Coin flows
            <span class="legend-dot legend-pack"></span> Pack pulls
            <span class="legend-dot legend-burn"></span> Burns
            <span class="legend-dot legend-xp"></span> XP streams
          </div>

          <div class="mesh-mini-card">
            <p>
              Tap a node in full explorer to enter focus mode — latest pack,
              transaction and streak for that wallet. (Mock copy)
            </p>
            <button class="btn-outline" id="btn-open-full-mesh">
              Open full Mesh Explorer
            </button>
          </div>

          <div class="activity-feed">
            <header class="section-header">
              <div>
                <h2>Mesh events</h2>
                <p class="section-sub">Last 10 demo actions</p>
              </div>
            </header>
            <ul id="meshEvents" class="activity-list"></ul>
          </div>
        </div>
      </section>
    </main>

    <!-- Bottom nav -->
    <nav id="bottom-nav" class="bottom-nav">
      <button class="nav-btn nav-btn-active" data-tab-target="home">Home</button>
      <button class="nav-btn" data-tab-target="loot">Loot</button>
      <button class="nav-btn" data-tab-target="quests">Quests</button>
      <button class="nav-btn" data-tab-target="mesh">Mesh</button>
    </nav>
  </div>

  <!-- Account sheet -->
  <div id="account-sheet" class="sheet-backdrop" aria-hidden="true">
    <div class="sheet">
      <div class="sheet-header">
        <div class="sheet-avatar-row">
          <div class="avatar-circle">S</div>
          <div>
            <div class="avatar-handle">@spawniz</div>
            <div class="avatar-sub">Mesh ID · Creator</div>
          </div>
        </div>
      </div>
      <div class="sheet-section-label">Account</div>
      <button class="sheet-row" data-action="referrals">
        <span>Referrals</span><span class="chevron">›</span>
      </button>
      <button class="sheet-row" data-action="earnings">
        <span>Earnings</span><span class="chevron">›</span>
      </button>
      <button class="sheet-row" data-action="collectibles">
        <span>Collectibles</span><span class="chevron">›</span>
      </button>

      <div class="sheet-section-label">Wallet &amp; account</div>
      <button class="sheet-row" data-action="swap-wallet">
        <span>Swap wallet</span><span class="chevron">›</span>
      </button>
      <button class="sheet-row sheet-row-danger" data-action="logout">
        <span>Log out / Disconnect</span>
      </button>

      <button id="btn-close-account" class="btn-full-width">Close</button>
    </div>
  </div>

  <!-- Settings overlay -->
  <div id="settings-sheet" class="sheet-backdrop" aria-hidden="true">
    <div class="settings-panel">
      <header class="settings-header">
        <button id="btn-settings-back" class="icon-back" aria-label="Back">
          ‹
        </button>
        <h2>Settings</h2>
      </header>

      <div class="settings-scroll">
        <div class="settings-section-label">Profile &amp; account</div>
        <button class="settings-row">Social profiles</button>
        <button class="settings-row">Notifications</button>
        <button class="settings-row">Feeds &amp; Oracle feed</button>

        <div class="settings-section-label">Wallet &amp; collectibles</div>
        <button class="settings-row">Preferred wallet</button>
        <button class="settings-row">Verified addresses</button>
        <button class="settings-row">Docked apps &amp; XP SDK</button>
        <button class="settings-row">Premium mesh filters</button>

        <div class="settings-section-label">Other</div>
        <button class="settings-row">Theme</button>
        <button class="settings-row">Support</button>
        <button class="settings-row">SpawnEngine Launchpad</button>
      </div>

      <button id="btn-close-settings" class="btn-full-width">Close</button>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <script src="mesh-bg.js"></script>
  <script src="app.js"></script>
</body>
</html>