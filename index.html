<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
  />
  <title>SpawnEngine ¬∑ Mesh HUD</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="app-body">
  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- SETTINGS FULLSCREEN SHEET -->
  <div id="settings-backdrop" class="sheet-backdrop hidden">
    <div class="sheet settings-sheet">
      <div class="sheet-header">
        <div class="sheet-title">Settings ¬∑ Mesh profile</div>
        <button id="settings-close" class="icon-button">
          <span class="icon-close">‚úï</span>
        </button>
      </div>

      <div class="sheet-section">
        <h3>Account & mesh</h3>
        <div class="settings-row">
          <div class="settings-item">
            <div class="settings-label">Handle</div>
            <div class="settings-main">@spawniz</div>
            <div class="settings-sub">Mesh ID ¬∑ Creator</div>
          </div>
          <div class="settings-item">
            <div class="settings-label">Connected wallet</div>
            <div class="settings-main wallet-address" data-wallet-address>
              Not connected
            </div>
            <div class="settings-sub">Base mainnet</div>
          </div>
        </div>
      </div>

      <div class="sheet-section">
        <h3>Role & lanes</h3>
        <p class="sheet-sub">
          V√§lj hur du vill att SpawnEngine ska behandla din XP och quests.
        </p>
        <div class="role-grid">
          <button class="role-card" data-role="dev">
            <h4>üß™ Dev / Builder</h4>
            <p>Contracts, bots, infra, miniapps.</p>
          </button>
          <button class="role-card" data-role="creator">
            <h4>üé® Creator / Artist</h4>
            <p>Cards, packs, tokens, art drops.</p>
          </button>
          <button class="role-card" data-role="hunter">
            <h4>‚ö° Alpha hunter</h4>
            <p>Trading, snipes, PnL, packs.</p>
          </button>
          <button class="role-card" data-role="collector">
            <h4>üé¥ Collector / Fan</h4>
            <p>Open, collect, complete sets.</p>
          </button>
        </div>
        <button id="save-role" class="btn-primary full-width" disabled>
          Save role
        </button>
      </div>

      <div class="sheet-section">
        <h3>Connected platforms</h3>
        <div class="settings-row">
          <div class="settings-pill">
            <div class="settings-label">Farcaster</div>
            <div class="settings-main">WarpAI Miniapp</div>
            <span class="chip chip-green">Active</span>
          </div>
          <div class="settings-pill">
            <div class="settings-label">Zora</div>
            <div class="settings-main">Creator mints</div>
            <span class="chip chip-purple">Docked</span>
          </div>
          <div class="settings-pill">
            <div class="settings-label">VibeMarket</div>
            <div class="settings-main">Pack sync</div>
            <span class="chip chip-amber">Planned</span>
          </div>
        </div>
      </div>

      <div class="sheet-section">
        <h3>Advanced mesh</h3>
        <ul class="settings-list">
          <li>Notification rules & SupCast alerts (mock)</li>
          <li>Onchain privacy defaults (mock)</li>
          <li>Gas limits & safety rails (mock)</li>
          <li>Dev hooks & API keys (mock)</li>
        </ul>
      </div>
    </div>
  </div>
  <!-- /SETTINGS -->

  <!-- FULLSCREEN BACKGROUND MESH -->
  <div id="mesh-bg">
    <canvas id="mesh-canvas"></canvas>
    <div class="mesh-overlay"></div>
  </div>

  <!-- APP SHELL -->
  <div class="app-shell" id="app-container">
    <!-- HERO CARD -->
    <header class="mesh-header">
      <div class="mesh-header-top">
        <button id="btn-account" class="avatar-chip">
          <div class="avatar-circle">S</div>
          <div class="avatar-meta">
            <div class="avatar-handle">@spawniz</div>
            <div class="avatar-sub">Mesh ID ¬∑ Creator</div>
          </div>
        </button>

        <button id="settings-btn" class="icon-button" aria-label="Settings">
          <span class="icon-gear"></span>
        </button>
      </div>

      <div class="mesh-header-tags">
        <span class="pill">Base ¬∑ Mesh ecosystems</span>
        <span class="pill pill-soft" id="meshRolePill">
          ‚ö° Alpha hunter / Trader
        </span>
        <span class="pill pill-soft">Mesh v0.4 ¬∑ Phase 1</span>
        <span class="pill pill-outline">Farcaster ready</span>
        <span class="pill pill-outline">Creator / Artist</span>
      </div>

      <div class="mesh-header-main">
        <h1 class="mesh-title">SpawnEngine ¬∑ Mesh HUD</h1>
        <p className="mesh-subtitle">
          Platform of platforms for creator coins, packs, XP streams, quests &amp; support.
        </p>
      </div>

      <div class="mesh-header-row">
        <div class="mesh-chip-row">
          <span class="platform-pill">
            v0.5 Creator Token Mesh
          </span>
          <span class="platform-pill">
            v1.0 Pack Protocol
          </span>
        </div>
      </div>

      <div class="mesh-header-row stats-row">
        <div class="stat-pill">
          <span class="stat-label">GAS</span>
          <span id="gasEstimate" class="stat-value">~0.20 gwei est.</span>
        </div>
        <div class="stat-pill">
          <span class="stat-label">MODE</span>
          <span class="stat-value">Single mesh ¬∑ Demo</span>
        </div>
        <div class="stat-pill">
          <span class="stat-label">WALLETS</span>
          <span id="activeWallets" class="stat-value">0</span>
        </div>
      </div>

      <div class="wallet-row">
        <button id="btn-connect" class="btn-primary">Connect</button>
        <span id="wallet-status-label" class="wallet-status">
          Not connected
        </span>
        <span class="wallet-address" data-wallet-address>
          Not connected
        </span>
        <span id="walletBalanceEth" class="wallet-balance">0.0000 ETH</span>
      </div>

      <div class="header-kpis">
        <div class="kpi">
          <div class="kpi-label">XP Balance</div>
          <div id="xpBalance" class="kpi-value">1575 XP</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">SPN Balance</div>
          <div id="spawnBalance" class="kpi-value">497 SPN</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Sync</div>
          <div class="kpi-value">Local mock ¬∑ Phase 1</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Active wallets</div>
          <div id="activeWalletsStat" class="kpi-value">0</div>
        </div>
      </div>

      <p class="header-note">
        XP k√∂r mock just nu ¬∑ senare kopplas den mot riktiga mesh-signaler.
      </p>
    </header>
    <!-- /HERO CARD -->

    <!-- HOLO HUD + INVENTORY MICRO-PANEL -->
    <div id="holo-hud" class="holo-hud"></div>
    <div id="inventory-slideout" class="inventory-slideout"></div>

    <!-- COMPACT PROFILE CARD (MITTEN) -->
    <section class="profile-card">
      <div class="profile-main">
        <div class="profile-avatar">S</div>
        <div class="profile-meta">
          <div class="profile-handle">@spawniz</div>
          <div class="profile-sub">Mesh ID ¬∑ Creator</div>
        </div>
      </div>
      <div class="profile-stats">
        <div class="profile-stat">
          <div class="profile-stat-label">XP</div>
          <div class="profile-stat-value">1600</div>
        </div>
        <div class="profile-stat">
          <div class="profile-stat-label">SPN</div>
          <div class="profile-stat-value">497</div>
        </div>
        <div class="profile-stat">
          <div class="profile-stat-label">Wallets</div>
          <div class="profile-stat-value">0</div>
        </div>
      </div>
    </section>

    <!-- TOP TABS -->
    <nav class="mesh-nav-scroll">
      <div class="mesh-nav" id="meshNav">
        <button class="mesh-nav-btn is-active" data-tab="home">
          <span class="mesh-nav-icon">üè†</span>
          <span class="mesh-nav-label">Home</span>
        </button>
        <button class="mesh-nav-btn" data-tab="loot">
          <span class="mesh-nav-icon">üé∞</span>
          <span class="mesh-nav-label">Loot</span>
        </button>
        <button class="mesh-nav-btn" data-tab="market">
          <span class="mesh-nav-icon">‚ö°</span>
          <span class="mesh-nav-label">Market</span>
        </button>
        <button class="mesh-nav-btn" data-tab="quests">
          <span class="mesh-nav-icon">üï∏Ô∏è</span>
          <span class="mesh-nav-label">Quests</span>
        </button>
        <button class="mesh-nav-btn" data-tab="mesh">
          <span class="mesh-nav-icon">üõ∞Ô∏è</span>
          <span class="mesh-nav-label">Mesh</span>
        </button>
        <button class="mesh-nav-btn" data-tab="slots">
          <span class="mesh-nav-icon">üé≤</span>
          <span class="mesh-nav-label">Slots</span>
        </button>
        <button class="mesh-nav-btn" data-tab="supcast">
          <span class="mesh-nav-icon">üéß</span>
          <span class="mesh-nav-label">SupCast</span>
        </button>
      </div>
    </nav>

    <!-- TAB PANELS -->
    <main class="tab-content">
      <!-- HOME -->
      <section id="tab-home" class="tab-panel tab-panel-active">
        <div class="streak-row">
          <div class="streak-wheel">
            <div class="streak-circle">
              <div class="streak-day-label">DAY</div>
              <div id="streakDays" class="streak-day-value">1</div>
              <div class="streak-day-label">STREAK</div>
            </div>
          </div>
          <div class="streak-copy">
            <div class="streak-title">Daily ritual</div>
            <p id="streakCopyText" class="streak-sub">
              Keep the streak for <span id="streakRemaining">6</span> more days for a full weekly run.
            </p>
            <div class="streak-bar">
              <div id="streakBarFill" class="streak-bar-fill"></div>
            </div>
            <button id="btn-checkin" class="btn-outline">Check-in</button>
          </div>
        </div>

        <section class="card-section">
          <header class="section-header">
            <div>
              <h2>Mesh feed</h2>
              <p class="section-sub">
                XP, packs & social mesh kring din wallet (mock).
              </p>
            </div>
            <span class="section-tag">Platform ¬∑ Live mock</span>
          </header>
          <ul id="homeActivityList" class="activity-list"></ul>
        </section>
      </section>

      <!-- LOOT -->
      <section id="tab-loot" class="tab-panel">
        <header class="section-header">
          <div>
            <h2>Loot & Pull Lab</h2>
            <p class="section-sub">
              Packs, synthesis och inventory f√∂r SpawnEngine.
            </p>
          </div>
          <span class="section-tag">Pillar ¬∑ Packs</span>
        </header>

        <div class="segmented">
          <button class="segmented-btn segmented-btn-active" data-loot-view="packs">
            Packs
          </button>
          <button class="segmented-btn" data-loot-view="lab">
            Pull Lab
          </button>
          <button class="segmented-btn" data-loot-view="inventory">
            Inventory
          </button>
        </div>

        <div id="lootView-packs" class="loot-view loot-view-active">
          <div class="card">
            <div class="card-title">Starter mesh pack</div>
            <p class="card-sub">
              Simulated pack open med Fragments, Shards &amp; Relic-chans.
            </p>
            <button id="btn-open-pack" class="btn-primary full-width">
              Simulate pack open
            </button>
            <p class="card-foot">
              I riktig version ers√§tts detta av en riktig pack-widget / kontrakt.
            </p>
          </div>

          <section class="card-section">
            <header class="section-header">
              <div>
                <h3>Recent loot</h3>
                <p class="section-sub">Senaste pack-√∂ppningar & synthesis.</p>
              </div>
            </header>
            <ul id="lootEvents" class="activity-list"></ul>
          </section>
        </div>

        <div id="lootView-lab" class="loot-view">
          <div class="card">
            <div class="card-title">Relic Lab</div>
            <p class="card-sub">
              Konvertera Fragments + Shards till Relics (mock crafting).
            </p>
            <button id="btn-simulate-synth" class="btn-outline full-width">
              Craft Relic
            </button>
            <p id="labResult" class="card-foot"></p>
          </div>
        </div>

        <div id="lootView-inventory" class="loot-view">
          <div class="card">
            <div class="card-title">Inventory</div>
            <p class="card-sub">
              Dina nuvarande loot-resurser i denna mesh.
            </p>
            <div class="inventory-rows">
              <div class="inv-row">
                <span>Fragments</span>
                <span id="invFragments">12</span>
              </div>
              <div class="inv-row">
                <span>Shards</span>
                <span id="invShards">3</span>
              </div>
              <div class="inv-row">
                <span>Relics</span>
                <span id="invRelics">1</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- MARKET -->
      <section id="tab-market" class="tab-panel">
        <header class="section-header">
          <div>
            <h2>Mesh market</h2>
            <p class="section-sub">
              Packs, boosts, services & collectibles i SpawnEngine.
            </p>
          </div>
          <span class="section-tag">Pillar ¬∑ Market</span>
        </header>

        <div id="marketFilters" class="market-filters">
          <button class="market-filter-chip is-active" data-filter="all">All</button>
          <button class="market-filter-chip" data-filter="packs">Packs</button>
          <button class="market-filter-chip" data-filter="tokens">Tokens</button>
          <button class="market-filter-chip" data-filter="collectibles">Collectibles</button>
          <button class="market-filter-chip" data-filter="services">Services</button>
          <button class="market-filter-chip" data-filter="boosts">Boosts</button>
        </div>

        <div id="marketEmpty" class="market-empty" style="display:none;">
          No listings for this filter yet.
        </div>

        <div id="marketGrid" class="market-grid"></div>

        <!-- Market popup -->
        <div id="marketDetailsBackdrop" class="sheet-backdrop hidden">
          <div class="sheet market-sheet">
            <div class="sheet-header">
              <div id="marketDetailsTitle" class="sheet-title"></div>
              <button id="marketDetailsBack" class="icon-button">
                <span class="icon-close">‚úï</span>
              </button>
            </div>
            <div id="marketDetailsBody"></div>
          </div>
        </div>
      </section>

      <!-- QUESTS -->
      <section id="tab-quests" class="tab-panel">
        <header class="section-header">
          <div>
            <h2>Quest mesh</h2>
            <p class="section-sub">
              Daily, weekly & support quests som matar dina XP streams.
            </p>
          </div>
          <span class="section-tag">Pillar ¬∑ Quests</span>
        </header>

        <ul id="questList" class="quest-list"></ul>
      </section>

      <!-- MESH EXPLORER -->
      <section id="tab-mesh" class="tab-panel">
        <header class="section-header">
          <div>
            <h2>Mesh explorer</h2>
            <p class="section-sub">
              Visualisering av wallets, packs & XP-str√∂mmar (bakgrundsmatrix).
            </p>
          </div>
          <span class="section-tag">Pillar ¬∑ Mesh</span>
        </header>

        <div class="mesh-mode-row">
          <button class="segmented-btn segmented-btn-active" data-mesh-mode="gravity">
            Gravity
          </button>
          <button class="segmented-btn" data-mesh-mode="alpha">
            Alpha
          </button>
          <button class="segmented-btn" data-mesh-mode="new">
            New
          </button>
        </div>

        <section class="card-section">
          <header class="section-header">
            <div>
              <h3>Mesh events</h3>
              <p class="section-sub">
                Demo-feed som samtidigt pingar bakgrundsmeshen.
              </p>
            </div>
          </header>
          <ul id="meshEvents" class="activity-list"></ul>
        </section>
      </section>

      <!-- SLOTS -->
      <section id="tab-slots" class="tab-panel">
        <header class="section-header">
          <div>
            <h2>Slots ¬∑ Pack reels</h2>
            <p class="section-sub">
              H√§r hamnar slot/pack-views sen ‚Äì nu √§r det bara mock copy.
            </p>
          </div>
          <span class="section-tag">Pillar ¬∑ Slots</span>
        </header>

        <div class="card">
          <div class="card-title">Slot mesh (coming)</div>
          <p class="card-sub">
            T√§nk Vibe/CS:GO opening fast i SpawnEngine-style. H√§r kan du senare
            plugga in riktiga pack-kontrakt eller VibeMarket API.
          </p>
          <p class="card-foot">
            Just nu √§r det bara en placeholder men tabben finns & funkar.
          </p>
        </div>
      </section>

      <!-- SUPCAST -->
      <section id="tab-supcast" class="tab-panel">
        <header class="section-header">
          <div>
            <h2>SupCast ¬∑ Support mesh</h2>
            <p class="section-sub">
              Support, feedback och dev-linje f√∂r SpawnEngine (mock).
            </p>
          </div>
          <span class="section-tag">Pillar ¬∑ Support</span>
        </header>

        <div class="card">
          <div class="card-title">Support lane</div>
          <p class="card-sub">
            Tanken: Farcaster + onchain ticket system. Nu: XP-mock + quest.
          </p>
          <p class="card-foot">
            Att bara √∂ppna den h√§r tabben kan trigga en support-quest i app.js.
          </p>
        </div>
      </section>
    </main>
  </div>

  <script src="mesh-bg.js" defer></script>
  <script src="app.js" defer></script>
</body>
</html>